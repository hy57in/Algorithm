<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        //숫자야구를 위해 4자리 랜덤 숫자배열 생성(첫자리는 0제외, 중복되는 숫자 안나오게)
        while (true) {
            let num = [];
            num[0] = Math.floor(Math.random() * 8 + 1);

            let cnt = 1;
            while (cnt < 4) {
                let tmp = Math.floor(Math.random() * 9);

                let findResult = num.indexOf(tmp);

                //검사 1. 중복되지 않을때만
                if (findResult == -1) {
                    num.push(tmp);
                    cnt++;
                }

            }
            //4자리 숫자 입력받아 num과 비교
            let count = 0;
            let strike = 0;
            let ball = 0;
            let getnum = '';
            let array_getnum = [];
            while (true) {
                if (count == 0) {
                    getnum = prompt("정답을 입력하세요! (서로 겹치지 않는 숫자로 구성된 4자리 숫자입니다.)");
                } else {
                    getnum = prompt('틀렸습니다' + "\n" + array_getnum + "\n" + strike + " 스트라이크" + "\n" + ball + " 볼" + "\n" + "다시 입력하세요." +
                        "\n 시도횟수 :" + count)
                }
                array_getnum = [];
                for (let i = 0; i < getnum.length; i++) {
                    array_getnum.push(getnum[i])
                }

                //스트라이크의 경우(자리값 일치 / 값 일치)
                strike = 0;
                for (let j = 0; j < num.length; j++) {
                    if (array_getnum[j] == num[j]) {
                        strike += 1;
                    }
                }

                //볼의 경우(자리값 불일치 / 값 일치)
                ball = 0;
                for (let m = 0; m < num.length; m++) {
                    for (let n = 0; n < array_getnum.length; n++) {
                        if (num[m] == array_getnum[n] & m != n) {
                            ball += 1
                        }
                    }
                }

                //홈런의 경우
                if (strike != 4) {
                    count += 1
                } else {
                    alert("홈런! 정답입니다." + num + "\n" + "시도횟수" + count)
                    break;
                }
            }
        }
    </script>

</body>

</html>